<div class="admin">
  <div class="admin-tab">
    <button ng-click="loadTables()" class="tab">Reload</button>
    <button ng-repeat="table in data.tables track by $index" ng-click="pickTable(table.name);"
            class="tab">{{ table.name }}</button>
  </div>
  <div ng-if="$error">{{ $error.msg }}</div>
  <div ng-if="activeTable">
    <span class="admin-label">Columns</span>
    <table class="admin">
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Nullable</th>
          <th>Unique</th>
          <th>Indexed</th>
          <th>Immutable</th>
          <th>Drop</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="column in activeTable.columns">
          <td>{{ column.name }}</td>
          <td>{{ column.type }}</td>
          <td>{{ column.nullable ? '' : 'not null' }}</td>
          <td>{{ column.unique ? 'unique' : '' }}</td>
          <td>{{ column.indexed ? 'indexed' : '' }}</td>
          <td>{{ column.immutable ? 'immutable' : '' }}</td>
          <td>
            <span ng-click="dropColumn(column.name);" title="Discard"
                  class="button enabled glyphicon glyphicon-trash"></span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div ng-if="activeTable">
    <span class="admin-label">Foreign keys</span>
    <table class="admin">
      <thead>
        <tr>
          <th>Name</th>
          <th>Reverse name</th>
          <th>Column name</th>
          <th>Reference table</th>
          <th>Drop</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="fk in activeTable.foreignKeys">
          <td>{{ fk.name }}</td>
          <td>{{ fk.revName }}</td>
          <td>{{ fk.column }}</td>
          <td>{{ fk.refTable }}</td>
          <td>
            <span ng-click="dropConstraint(fk.name);" title="Discard"
                  class="button enabled glyphicon glyphicon-trash"></span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div ng-if="activeTable">
    <span class="admin-label">Aggregated fields</span>
    <table class="admin">
      <thead>
        <tr>
          <th>Name</th>
          <th>Expression</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="ref in activeTable.aggRefs">
          <td>{{ ref.name }}</td>
          <td>{{ ref.expr }}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div ng-if="activeTable">
    <span class="admin-label">Rules</span>
    <table class="admin">
      <thead>
        <tr>
          <th>Name</th>
          <th>Expression</th>
          <th>Drop</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="rule in activeTable.rules">
          <td>{{ rule.name }}</td>
          <td>{{ rule.expr }}</td>
          <td>
            <span ng-click="dropConstraint(rule.name);" title="Discard"
                  class="button enabled glyphicon glyphicon-trash"></span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>