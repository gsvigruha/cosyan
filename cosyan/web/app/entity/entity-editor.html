<div class="editor">
  <table>
    <th>Name</th>
    <th>Type</th>
    <th>Value</th>
    <tr ng-repeat="field in entity.fields track by $index">
      <td>{{ field.name }}</td>
      <td>{{ field.type }}</td>
      <td ng-switch on="field.type">
        <input ng-model="field.value" disabled ng-switch-when="id"></input>
        <input ng-model="field.value" placeholder="###" ng-switch-when="integer"></input>
        <input ng-model="field.value" placeholder="##.#" ng-switch-when="float"></input>
        <input ng-model="field.value" ng-switch-default></input>
      </td>
    </tr>
  </table>
  <div ng-repeat="fk in entity.foreignKeys track by $index" class="subentity">
    <div class="entity-menu">
      <span title="Reference"><object data="icons/fk.svg" type="image/svg+xml" class="icons"></object></span>
      <span class="entity-menu-label">{{ fk.name }}</span>
      <span ng-click="expandEntity(fk);" title="Expand" class="button glyphicon glyphicon-collapse-down" ng-if="fk.value"></span>
      <span ng-click="pickEntity(fk);" title="Pick" class="button glyphicon glyphicon-list-alt"></span>
    </div>
    <entity-editor entity="entityList[fk.name]" ng-if="entityList[fk.name]"></entity-editor>
    <entity-pick type="fk.refTable" pick="pick(fk, id)" ng-if="entityPick[fk.name]"></entity-pick>
  </div>
  <div ng-repeat="rfk in entity.reverseForeignKeys track by $index" class="subentity">
    <div class="entity-menu">
      <span title="Multi reference"><object data="icons/rfk.svg" type="image/svg+xml" class="icons"></object></span>
      <span class="entity-menu-label">{{ rfk.name }}</span>
      <span ng-click="expandEntityList(rfk);" title="Expand" class="button glyphicon glyphicon-collapse-down"></span>
    </div>
    <entity-list entities="entityList[rfk.name]" ng-if="entityList[rfk.name]"></entity-list>
  </div>
  <span ng-click="saveEntity();" title="Save" class="button glyphicon glyphicon-floppy-disk"></span>
</div>